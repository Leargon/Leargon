#Wed Feb 04 18:09:51 CET 2026
micronaut.application.names=leargon-backend
micronaut.server.port=8082\
micronaut.server.context-path:/

# Management endpoints
endpoints.health.enabled=true
endpoints.health.sensitive=false

# Database Configuration
# Use environment variables for sensitive credentials
datasources.default.url=${DB_URL:jdbc:mysql://localhost:3306/leargon?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true}
datasources.default.driverClassName=com.mysql.cj.jdbc.Driver
datasources.default.username=${DB_USERNAME:leargon}
datasources.default.password=${DB_PASSWORD:leargon}
datasources.default.dialect=MYSQL

# JPA Configuration
jpa.default.properties.hibernate.hbm2ddl.auto=none
jpa.default.properties.hibernate.show_sql=false
jpa.default.properties.hibernate.format_sql=true

# Liquibase Configuration
liquibase.datasources.default.change-log=classpath:db/changelog/db.changelog-master.yaml

# CORS Configuration
micronaut.server.cors.enabled=true
micronaut.server.cors.configurations.web.allowedOrigins=http://localhost:3000,http://localhost:5173
micronaut.server.cors.configurations.web.allowedMethods=GET,POST,PUT,DELETE,OPTIONS
micronaut.server.cors.configurations.web.allowedHeaders=Content-Type,Authorization
micronaut.server.cors.configurations.web.allowCredentials=true

# JWT Configuration
# REQUIRED: Set JWT_SECRET environment variable (minimum 32 characters)
# Generate with: openssl rand -base64 32
micronaut.security.authentication=bearer
micronaut.security.token.jwt.signatures.secret.generator.secret=${JWT_SECRET}
micronaut.security.token.jwt.generator.access-token.expiration=3600
micronaut.security.intercept-url-map[0].pattern=/swagger/**
micronaut.security.intercept-url-map[0].access=isAnonymous()
micronaut.security.intercept-url-map[1].pattern=/swagger-ui/**
micronaut.security.intercept-url-map[1].access=isAnonymous()

# OpenAPI Configuration
micronaut.router.static-resources.swagger.paths=classpath:META-INF/swagger
micronaut.router.static-resources.swagger.mapping=/swagger/**
micronaut.router.static-resources.swagger-ui.paths=classpath:META-INF/swagger/views/swagger-ui
micronaut.router.static-resources.swagger-ui.mapping=/swagger-ui/**
micronaut.openapi.enabled=true
micronaut.openapi.server.context.path=/
micronaut.openapi.application.names=LÃ©argon API
micronaut.openapi.application.descriptions=REST API for user authentication and management
micronaut.openapi.application.version=1.0.0

# Fallback Admin User Configuration (optional)
# If set, creates admin user on startup if one doesn't exist
# Useful for development and initial production setup
admin.email=${ADMIN_EMAIL:}
admin.username=${ADMIN_USERNAME:}
admin.password=${ADMIN_PASSWORD:}
admin.firstName=${ADMIN_FIRST_NAME:System}
admin.lastName=${ADMIN_LAST_NAME:Administrator}

# Azure Entra ID Configuration (optional)
# Set AZURE_TENANT_ID and AZURE_CLIENT_ID to enable Azure login
azure.tenant-id=${AZURE_TENANT_ID:}
azure.client-id=${AZURE_CLIENT_ID:}

# Virtual Threads Configuration (Java 21)
# Enables non-blocking I/O without requiring reactive code changes
micronaut.server.thread-selection=AUTO
